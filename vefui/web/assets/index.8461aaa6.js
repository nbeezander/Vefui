import{u as e,r as t,l as a,o,a as l,d as n,c as i,b as s,Q as r,m as d,p as m,e as u,f as c,g as p,h as g,F as v,i as h,j as f,k as b,t as w,n as y,w as x,q as k,s as V,v as D,x as L,y as T,z as _,A as F,B as S,C as E,D as C,_ as U,E as $,G as M,H,I}from"./vendor.b3e590cb.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const i=new URL(e,o);if(self[t].moduleMap[i])return a(self[t].moduleMap[i]);const s=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){n(new Error(`Failed to import: ${e}`)),l(r)},onload(){a(self[t].moduleMap[i]),l(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("assets/");const O=window.outerWidth,R=window.outerHeight,Y=window.innerHeight;var j=n({name:"TForm",setup(){const t=e(),a=i((()=>t.state.formRunning)),o=i((()=>t.state.formItems)),l=i((()=>t.state.formData)),n=i((()=>t.state.formOption)),r=s({});return{formData:l,formItems:o,addFile:e=>{let a=e.file,o={};o[e.filename]=a,t.commit("updateForm",o),r[a.name]=e.filename,t.dispatch("validateField",e.filename)},datePickerShortCuts:s([{text:"A Week Ago",value:new Date((new Date).getTime()-6048e5)},{text:"Yesterday",value:new Date((new Date).getTime()-864e5)},{text:"Today",value:new Date},{text:"Tomorrow",value:new Date((new Date).getTime()+864e5)}]),reformatDate:(e,a,o="YYYY-MM-DD")=>{let l={};l[a]=d(e).format(o),t.commit("updateForm",l)},formOption:n,removeFile:e=>{if(r[e.name]){let a={};a[r[e.name]]=void 0,t.commit("updateForm",a),t.dispatch("validateField",r[e.name])}},running:a}},methods:{formValidate(){},fieldValidate(e){this.$refs.form.validateField(e.detail,(e=>{}))},formSubmit(){this.$refs.form.validate((e=>{e?this.$store.dispatch("submit"):r.error(this.$rt("form.validateError"))}))}},mounted(){document.addEventListener("FormValidate",this.formSubmit),document.addEventListener("FieldValidate",this.fieldValidate)},unmounted(){document.removeEventListener("FormValidate",this.formSubmit),document.removeEventListener("FieldValidate",this.fieldValidate)}});const z=k("data-v-300bfb88");m("data-v-300bfb88");const W=y("i",{class:"el-icon-upload el-icon--right"},null,-1),q={key:1,class:"el-icon-upload"},B={key:2,class:"el-upload__text"};u();const A=z(((e,t,a,o,l,n)=>{const i=c("el-input"),s=c("el-switch"),r=c("el-option"),d=c("el-select"),m=c("el-slider"),u=c("el-date-picker"),k=c("el-button"),V=c("el-upload"),D=c("el-form-item"),L=c("el-form");return p(),g(L,{ref:"form",model:e.formData,"label-position":e.formOption.labelPosition,"label-width":e.formOption.labelWidth,"label-suffix":e.formOption.suffix,onSubmit:x(e.formSubmit,["prevent"])},{default:z((()=>[(p(!0),g(v,null,h(e.formItems,(t=>(p(),g(D,{prop:t.key,label:t.label,rules:t.rules},{default:z((()=>["input"===t.component&&t.isNumber?(p(),g(i,{key:0,minLength:t.minLength,maxlength:t.maxLength,disabled:t.disabled,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,modelModifiers:{number:!0},placeholder:t.info},null,8,["minLength","maxlength","disabled","modelValue","onUpdate:modelValue","placeholder"])):"input"===t.component&&t.trim?(p(),g(i,{key:1,minLength:t.minLength,maxlength:t.maxLength,disabled:t.disabled,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,modelModifiers:{trim:!0},placeholder:t.info},null,8,["minLength","maxlength","disabled","modelValue","onUpdate:modelValue","placeholder"])):"input"===t.component?(p(),g(i,{key:2,minLength:t.minLength,maxlength:t.maxLength,disabled:t.disabled,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,placeholder:t.info},null,8,["minLength","maxlength","disabled","modelValue","onUpdate:modelValue","placeholder"])):f("",!0),"textarea"===t.component?(p(),g(i,{key:3,minLength:t.minLength,maxlength:t.maxLength,disabled:t.disabled,type:"textarea",rows:t.rows,autosize:{minRows:t.rows},modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,placeholder:t.info},null,8,["minLength","maxlength","disabled","rows","autosize","modelValue","onUpdate:modelValue","placeholder"])):f("",!0),"switch"===t.component&&t.showText?(p(),g(s,{key:4,disabled:t.disabled,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,"active-text":t.activeText,"inactive-text":t.inactiveText,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-color":t.activeColor,"inactive-color":t.inactiveColor},null,8,["disabled","modelValue","onUpdate:modelValue","active-text","inactive-text","active-value","inactive-value","active-color","inactive-color"])):"switch"===t.component?(p(),g(s,{key:5,disabled:t.disabled,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-color":t.activeColor,"inactive-color":t.inactiveColor},null,8,["disabled","modelValue","onUpdate:modelValue","active-value","inactive-value","active-color","inactive-color"])):f("",!0),"select"===t.component?(p(),g(d,{key:6,clearable:"",modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,placeholder:t.info},{default:z((()=>[(p(!0),g(v,null,h(t.options,(e=>(p(),g(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):f("",!0),"slider"===t.component?(p(),g(m,{key:7,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,min:t.min,max:t.max,step:t.step,"show-tooltip":t.tooltip,"show-stops":t.gap,range:t.range,marks:t.marks},null,8,["modelValue","onUpdate:modelValue","min","max","step","show-tooltip","show-stops","range","marks"])):f("",!0),"date"===t.component?(p(),g(u,{key:8,modelValue:e.formData[t.key],"onUpdate:modelValue":a=>e.formData[t.key]=a,type:"date",placeholder:t.info,format:"YYYY-MM-DD",shortcuts:e.datePickerShortCuts,onChange:a=>e.reformatDate(a,t.key,t.format)},null,8,["modelValue","onUpdate:modelValue","placeholder","shortcuts","onChange"])):f("",!0),"upload"===t.component?(p(),g(V,{key:9,drag:t.drag,name:t.key,action:"/submit",limit:1,multiple:!1,"on-remove":e.removeFile,"auto-upload":!0,accept:t.accept,"http-request":e.addFile},{default:z((()=>[t.drag?f("",!0):(p(),g(k,{key:0,type:"success"},{default:z((()=>[b(w(t.selectText),1),W])),_:2},1024)),t.drag?(p(),g("i",q)):f("",!0),t.drag?(p(),g("div",B,[b(w(t.dragText),1),y("em",null,w(t.selectText),1)])):f("",!0)])),_:2},1032,["drag","name","on-remove","accept","http-request"])):f("",!0)])),_:2},1032,["prop","label","rules"])))),256)),y(k,{type:"primary",onClick:e.formSubmit,loading:e.running},{default:z((()=>[b(w(e.$rt("form.submitBtnText")),1)])),_:1},8,["onClick","loading"])])),_:1},8,["model","label-position","label-width","label-suffix","onSubmit"])}));j.render=A,j.__scopeId="data-v-300bfb88";const P={name:"THighlight",props:{language:{type:String,required:!0},autodetect:{type:Boolean,default:!1},code:{type:String,required:!0}},setup(e,{ctx:a}){const l=t(""),n=t(""),i=t(!0),s=t("");return o((()=>{(()=>{if(!e.autodetect&&!V.getLanguage(e.language))return l.value="hljs",void(s.value=(t=e.code,t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")));var t;let a={};!e.language||e.autodetect?(a=V.highlightAuto(e.code),n.value=a.language):(a=V.highlight(e.language,e.code,i.value),n.value=e.language),l.value="hljs "+n.value,s.value=a.value})()})),{className:l,highlighted:s}}},N=k("data-v-43900506");m("data-v-43900506");const G={class:"t-pre"};u();const Q=N(((e,t,a,o,l,n)=>(p(),g("pre",G,[y("code",{class:["t-code",o.className],innerHTML:o.highlighted},null,10,["innerHTML"])]))));P.render=Q,P.__scopeId="data-v-43900506";var X=n({name:"TConsole",components:{THighlight:P},setup(){const t=e();return{logs:i((()=>t.state.logs)),height:i((()=>t.state.window.innerHeightStyle))}}});const J=k("data-v-80333a48")(((e,t,a,o,l,n)=>{const i=c("t-highlight");return p(),g("div",{class:"t-console",style:{height:e.height}},[(p(!0),g(v,null,h(e.logs,(e=>(p(),g(i,{language:e.language,code:e.message},null,8,["language","code"])))),256))],4)}));X.render=J,X.__scopeId="data-v-80333a48";var K=n({name:"Index",components:{TForm:j,TConsole:X},setup(){const n=e(),{width:s,height:r,outerStyle:d,innerStyle:m}=(()=>{const n=e(),i=t(O),s=t(R),r=n.state.window.minWidth||O,d=n.state.window.minHeight||R,m=t(Y-60),u=t(Y-120),c=t({height:`${m.value}px`,overflowY:"auto"}),p=t({height:`${u.value}px`,overflowY:"auto"}),g=a.debounce((function(){i.value=Math.max(window.outerWidth,r),s.value=Math.max(window.outerHeight,d),m.value=window.innerHeight-60,u.value=window.innerHeight-120,c.value.height=`${m.value}px`,p.value.height=`${u.value}px`,n.commit("resize",{innerHeightStyle:p.value.height,innerWidthStyle:0}),window.resizeTo(i.value,s.value)}),200);return o((()=>{window.addEventListener("resize",g)})),l((()=>{window.removeEventListener("resize",g)})),{width:i,height:s,outerStyle:c,innerStyle:p}})(),u=i({get:()=>n.state.activeTab,set:e=>{n.commit("activeTab",e)}});return o((()=>{n.dispatch("init")})),{width:s,height:r,outerStyle:d,innerStyle:m,activeTab:u}}});const Z=k("data-v-82cfd476"),ee=Z(((e,t,a,o,l,n)=>{const i=c("t-form"),s=c("el-tab-pane"),r=c("t-console"),d=c("el-tabs"),m=c("el-card"),u=c("el-col"),v=c("el-row"),h=c("el-main"),f=c("el-container");return p(),g(f,null,{default:Z((()=>[y(h,{class:"scoped-main"},{default:Z((()=>[e.width<=960?(p(),g(v,{key:0,gutter:10,id:"sm-screen"},{default:Z((()=>[y(u,{span:24},{default:Z((()=>[y(m,{"body-style":e.outerStyle,shadow:"never"},{default:Z((()=>[y(d,{type:"card",modelValue:e.activeTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.activeTab=t)},{default:Z((()=>[y(s,{label:e.$rt("index.form"),name:"form"},{default:Z((()=>[y(i)])),_:1},8,["label"]),y(s,{label:e.$rt("index.console"),name:"console"},{default:Z((()=>[y(r)])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["body-style"])])),_:1})])),_:1})):(p(),g(v,{key:1,gutter:10,id:"lg-screen"},{default:Z((()=>[y(u,{span:12},{default:Z((()=>[y(m,{"body-style":e.innerStyle,shadow:"never"},{header:Z((()=>[y("span",null,w(e.$rt("index.form")),1)])),default:Z((()=>[y(i)])),_:1},8,["body-style"])])),_:1}),y(u,{span:12},{default:Z((()=>[y(m,{"body-style":e.innerStyle,shadow:"never"},{header:Z((()=>[y("span",null,w(e.$rt("index.console")),1)])),default:Z((()=>[y(r)])),_:1},8,["body-style"])])),_:1})])),_:1}))])),_:1})])),_:1})}));K.render=ee,K.__scopeId="data-v-82cfd476";const te={name:"TRightMenu",props:{},setup(){const a=e(),n=t(!1),r=s({left:"200px",top:"100px"}),{x:d,y:m}=(()=>{const a=t(0),n=t(0),s=e(),r=i((()=>s.state.debug));function d(e){let t=e.clientX,o=e.clientY,l=window.innerWidth,i=window.innerHeight;return a.value=1.5*t>l?t-200:t,n.value=2*o>i?o-80:o,e.returnValue=!1,!1}function m(e){return!!(r.value||["F5","F7","F12"].indexOf(e.code)<0)||(e.returnValue=!1,!1)}return o((()=>{window.addEventListener("contextmenu",d),window.addEventListener("keydown",m)})),l((()=>{window.removeEventListener("contextmenu",d),window.removeEventListener("keydown",m)})),{x:a,y:n}})(),u=()=>{n.value=!1};o((()=>{window.addEventListener("click",u)})),l((()=>{window.removeEventListener("click",u)})),D([d,m],((e,t)=>{n.value=!0,r.left=`${d.value}px`,r.top=`${m.value}px`}));return{visible:n,menuStyle:r,dispatch:e=>{a.dispatch(e)}}}},ae=k("data-v-2a922c7b");m("data-v-2a922c7b");const oe=y("span",{class:"icon-warp"},[y("i",{class:"el-icon-refresh"})],-1),le={class:"t-button",type:"button"},ne=y("span",{class:"icon-warp"},null,-1),ie={class:"t-button",type:"button"},se=y("span",{class:"icon-warp"},[y("i",{class:"el-icon-upload2"})],-1),re={class:"t-button",type:"button"};u();const de=ae(((e,t,a,o,l,n)=>{const i=c("el-divider");return L((p(),g("div",{class:"t-menu",style:o.menuStyle},[y("div",{class:"t-menu-item",onClick:t[1]||(t[1]=e=>o.dispatch("init"))},[oe,y("button",le,[y("span",null,w(e.$rt("menu.reload")),1)])]),y(i,{style:{margin:"8px 0"}}),y("div",{class:"t-menu-item",onClick:t[2]||(t[2]=e=>o.dispatch("clear"))},[ne,y("button",ie,[y("span",null,w(e.$rt("menu.clear")),1)])]),y("div",{class:"t-menu-item",onClick:t[3]||(t[3]=e=>o.dispatch("beforeSubmit"))},[se,y("button",re,[y("span",null,w(e.$rt("menu.submit")),1)])])],4)),[[T,o.visible]])}));te.render=de,te.__scopeId="data-v-2a922c7b";var me=n({name:"App",components:{Index:K,TRightMenu:te},setup(){const t=F(),{t:o,locale:l}=_({useScope:"global"}),n=e(),s=i((()=>n.state.lang));D(s,((e,t)=>{l.value=s.value})),null!=t&&(t.appContext.config.globalProperties.$rt=(e,...t)=>a.has(n.state.messages,e)?a.get(n.state.messages,e):o(e,t))}});me.render=function(e,t,a,o,l,n){const i=c("Index"),s=c("TRightMenu");return p(),g(v,null,[y(i),y(s)],64)};const ue=E.create({baseURL:"/",timeout:3600,headers:{"Content-Type":"multipart/form-data"}});ue.interceptors.request.use((e=>e),(e=>{r.error("Request Error!")}));const ce=(e,t)=>ue.get(e,{params:t}),pe=(e,t)=>ue.post(e,t),ge=C({state:{debug:!0,lang:"en",window:{innerHeightStyle:window.innerHeight-120+"px",innerWidthStyle:0},activeTab:"form",formOption:{labelOption:"top",labelWidth:"120px",suffix:" : "},formItems:[],formData:{},formValidated:!1,formRunning:!1,logs:[],messages:{}},getters:{},mutations:{resize(e,t){Object.assign(e.window,t)},log(e,t){e.logs.push(t)},updateForm(e,t){Object.assign(e.formData,t)},updateFormItems(e,t){e.formItems=t},updateFormOption(e,t){e.formOption=t},formValidate(e,t){e.formValidated=t},debug(e,t){e.debug=t},activeTab(e,t){e.activeTab=t},messages(e,t){e.messages=t},running(e,t){e.formRunning=t},language(e,t){e.lang=t}},actions:{async init(e){const{data:t}=await ce("/init");e.commit("updateFormItems",t.form.items),e.commit("updateForm",t.form.default),e.commit("updateFormOption",t.form.option),e.commit("debug",t.debug),e.commit("resize",t.window),e.commit("language",t.lang),e.commit("messages",t.messages)},beforeSubmit(e){const t=document.createEvent("CustomEvent");t.initCustomEvent("FormValidate",!1,!0,!1),document.dispatchEvent(t)},validateField(e,t){const a=document.createEvent("CustomEvent");a.initCustomEvent("FieldValidate",!1,!0,t),document.dispatchEvent(a)},async submit(e){let t=new FormData;for(const o in e.state.formData)t.append(o,e.state.formData[o]);var a;e.commit("activeTab","console"),e.commit("running",!0),await(a=t,pe("/submit",a))},clear(e){e.state.logs=[]}}}),ve={el:U.el,name:"test",index:{form:"Form",console:"Console"},menu:{reload:"Reload",clear:"Clear Console",submit:"Submit Form"},form:{submitBtnText:"Submit",validateError:"Form Validate Error."}},he=M({locale:"en",fallbackLocale:"en",messages:{default:ve,en:ve,"zh-cn":{el:$.el,index:{form:"表单",console:"控制台"},menu:{reload:"重新加载",clear:"清空控制台",submit:"提交表单"},form:{submitBtnText:"确定",validateError:"表单验证失败"}}}});const fe=I(me);fe.use(ge),function(e,t={}){e.use(S,t)}(fe,{i18n:he.global.t}),fe.use(he),function(e){const t=window.location.origin,a=H(t+"/console");a.on("disconnect",(function(){console.log("websocket disconnected.")})),a.on("connect",(()=>{console.log("websocket connected.")})),a.on("console",(t=>{e.commit("log",t)})),a.on("task:complete",(t=>{e.commit("running",!1)}))}(ge),fe.mount("#app");
